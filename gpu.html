<?php
//Making sure the server reloads the file each time the file is changed
$etag = md5_file("main.js");
header("ETag: $etag");

//database connection establishment 
//databse name: techdata // modify this part when needed 
$server="localhost";
$username="root";
$password="";
$database="techdata";
$conn = mysqli_connect($server, $username, $password, $database);


//$conn=mysqli_connect($server, $student_id, $user_name, $email, $department, $admitted_semester, $password, $database);
//The mysqli_connect() function expects the parameters in the following order: host, username, password, database

//error handling 
if (!$conn){
    die("Error".mysqli_connect_error());
}

$sql = "select * from gpus";
$result = mysqli_query($conn, $sql);
$gpus = mysqli_fetch_all($result, MYSQLI_ASSOC);

?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Tech Shop</title>
</head>
<body>
    <nav>
        <div class="logo">
            <img src="./Shop%20Logo.F.png" alt="logo">
        </div>
        <div class="items">
            <a href="index.php">Home</a>
            <a target="_blank" href="https://matias.ma/nsfw/" id="showProducts">Products</a>
            <input type="text" id="searchInput" placeholder="Search products...">
        </div>
    </nav>

    <section id="productList">
        <div class="product" data-name="RAM">
            <img src="macy.jpg" alt="Cooler Image">
            <h2>gpu1</h2>
            <p>Description of RAM. Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
            <p>Price: $99.99</p>
            <button onclick="viewProduct('gpu1', '$99.99')">View Details</button>
        </div>

        <div class="product" data-name="CPU">
            <h2>gpu2</h2>
            <p>Description of CPU. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            <p>Price: $199.99</p>
            <button onclick="viewProduct('gpu2', '$99.99')">View Details</button>
        </div>

        <div class="product" data-name="Cooler">
            <h2>gpu3</h2>
            <p>Description of Cooler. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            <p>Price: $199.99</p>
            <button onclick="viewProduct('gpu3', '$99.99')">View Details</button>
        </div>

        <div class="product" data-name="Cooler">
            <h2>gpu4</h2>
            <p>Description of Casing. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            <p>Price: $199.99</p>
            <button onclick="viewProduct('gpu4', '$99.99')">View Details</button>
        </div>

        <div class="product" data-name="Cooler">
            <h2>gpu5</h2>
            <p>Description of GPU. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            <p>Price: $199.99</p>
            <button onclick="viewProduct('gpu5', '$99.99')">View Details</button>
        </div>

        <div class="product" data-name="Cooler">
            <h2>gpu6</h2>
            <p>Description of Thermal Paste. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            <p>Price: $199.99</p>
            <button onclick="viewProduct('gpu6', '$99.99')">View Details</button>
        </div>

        <!-- Add more product elements as needed -->

    </section>

    <section id="productDetails" style="display: none;">
        <h2 id="productName"></h2>
        <p id="productDescription"></p>
        <p id="productPrice"></p>
        <button onclick="goBack()">Go Back</button>
    </section>
    
</section>

<section id="productDetails" style="display: none;">
    <h2 id="productName"></h2>
    <p id="productDescription"></p>
    <p id="productPrice"></p>
    <table>
        <tr>
            <th>
                Brand
            </th>
            <th>
                Model
            </th>
            <th>
                Chip
            </th>
            <th>
                Memory
            </th>
            <th>
                GPU_Clock
            </th>
            <th>
                Memory_Clock
            </th>
        </tr>
        <?php foreach($gpus as $items): ?>
            <div class="container d-flex justify-content-center card my-3 w-75">
                <div class="card-body text-center">
                        <tr>
                            <td>
                                <?php
                                echo $items['Brand'] . " ";
                                ?>
                            </td>
                            <td>
                                <?php
                                echo $items['Model'] . " ";
                                ?>
                            </td>
                            <td>
                                <?php
                                echo $items['Chip'] . " ";
                                ?>
                            </td>
                            <td>
                                <?php
                                echo $items['Memory'] . " ";
                                ?>
                            </td>
                            <td>
                                <?php
                                echo $items['GPU_Clock'] . " ";
                                ?>
                            </td>
                            <td>
                                <?php
                                echo $items['Memory_Clock'] . " ";
                                ?>
                            </td>
                        </tr>
                </div>
            </div>
        <?php endforeach; ?>
    </table>
    <button onclick="goBack()">Go Back</button>
</section>


    <footer>
        <p>&copy; 2023 Tech Shop. All rights reserved.</p>
    </footer>

<!--Adding Javascript-->
<script src="main.js"></script>
</body>
</html>